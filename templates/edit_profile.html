{% extends "base.html" %}
{% block title %}Редактировать профиль{% endblock %}

{% block content %}
<h2>Редактировать профиль</h2>

<form method="post"
      action="/api/profile/edit_profile"
      enctype="multipart/form-data"
      data-ajax>

  <div style="display: flex; gap: 20px;">
    <div>
        <label>Имя:</label><br>
        <input type="text" name="firstName" value="{{ user.firstName }}" placeholder="Ваше имя"><br><br>
    </div>
    <div>
        <label>Фамилия:</label><br>
        <input type="text" name="lastName" value="{{ user.lastName }}" placeholder="Ваша фамилия"><br><br>
    </div>
  </div>

  <label>Загрузить аватар:</label><br>
  <input type="file" name="avatar" accept=".png,.jpg,.jpeg,.gif"><br><br>

  <label>Дата рождения (ГГГГ-ММ-ДД):</label><br>
  <input type="date" name="birthdate" value="{{ user.birthdate or '' }}"><br><br>

  <label>Статус:</label><br>
  <input type="text" name="status" value="{{ user.status or '' }}"><br><br>

  <label>О себе:</label><br>
  <textarea name="about" rows="5" cols="40">{{ user.about or '' }}</textarea><br><br>

  <button type="submit">Сохранить</button>
</form>

<hr style="margin: 30px 0; border: 0; border-top: 1px solid #ccc;">

<div style="background: #fff0f0; padding: 15px; border: 1px solid #ffcccc; border-radius: 5px;">
    <h3 style="margin-top: 0; color: #d9534f;">Опасная зона</h3>
    <p>Вы можете навсегда удалить свой аккаунт. Это действие нельзя отменить.</p>
    
    <form method="post" action="/api/profile/delete_account" data-ajax>
        <button type="submit" 
                style="background: #d9534f; color: white; border: none; padding: 10px 20px; cursor: pointer;"
                onclick="return confirm('Вы точно хотите удалить свой профиль? Все данные будут стерты безвозвратно.');">
            Удалить аккаунт навсегда
        </button>
    </form>
</div>

<script src="/static/js/profile.js"></script>
{% endblock %}