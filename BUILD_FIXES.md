# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å–±–æ—Ä–∫–∏ - 23 —è–Ω–≤–∞—Ä—è 2026

## –ü—Ä–æ–±–ª–µ–º–∞
Docker build –ø–∞–¥–∞–ª —Å 23 TypeScript –æ—à–∏–±–∫–∞–º–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç.

## –ù–∞–π–¥–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

### 1. ‚ùå `friends.service.ts` - —Ñ–∞–π–ª –±—ã–ª –æ–±—Ä–µ–∑–∞–Ω
**–°—Ç—Ä–æ–∫–∞ 59:** `include:` - –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

**–ü—Ä–∏—á–∏–Ω–∞:** –§–∞–π–ª –±—ã–ª —Å–ª—É—á–∞–π–Ω–æ –æ–±—Ä–µ–∑–∞–Ω, –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –≤—Å–µ –º–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–∞.

**–†–µ—à–µ–Ω–∏–µ:** –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –º–µ—Ç–æ–¥—ã:
- `getPossible()` - –∑–∞–≤–µ—Ä—à—ë–Ω
- `getIncoming()` - –¥–æ–±–∞–≤–ª–µ–Ω
- `getOutgoing()` - –¥–æ–±–∞–≤–ª–µ–Ω
- `getFriends()` - –¥–æ–±–∞–≤–ª–µ–Ω
- `getSubscribers()` - –¥–æ–±–∞–≤–ª–µ–Ω
- `getSubscriptions()` - –¥–æ–±–∞–≤–ª–µ–Ω
- `sendFriendRequest()` - –¥–æ–±–∞–≤–ª–µ–Ω
- `acceptFriendRequest()` - –¥–æ–±–∞–≤–ª–µ–Ω
- `cancelFriendRequest()` - –¥–æ–±–∞–≤–ª–µ–Ω
- `leaveAsSubscriber()` - –¥–æ–±–∞–≤–ª–µ–Ω
- `removeFriend()` - –¥–æ–±–∞–≤–ª–µ–Ω
- `subscribe()` - –¥–æ–±–∞–≤–ª–µ–Ω
- `unsubscribe()` - –¥–æ–±–∞–≤–ª–µ–Ω
- `dismiss()` - –¥–æ–±–∞–≤–ª–µ–Ω

---

### 2. ‚ùå `world.controller.ts` - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–º–ø–æ—Ä—Ç `Body`
**–°—Ç—Ä–æ–∫–∏ 81, 86, 91:** `@Body() only refers to a type, but is being used as a value`

**–ü—Ä–∏—á–∏–Ω–∞:** –î–µ–∫–æ—Ä–∞—Ç–æ—Ä `Body` –Ω–µ –±—ã–ª –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏–∑ `@nestjs/common`.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç:
```typescript
import {
  Controller,
  Get,
  Post,
  Param,
  Body,  // ‚Üê –î–æ–±–∞–≤–ª–µ–Ω–æ
  UseGuards,
  Render,
  ParseIntPipe,
} from '@nestjs/common';
```

---

### 3. ‚ùå `world.service.ts` - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–µ—Ç–æ–¥ `getActiveActionsCount`
**–°—Ç—Ä–æ–∫–∞ 36:** `Property 'getActiveActionsCount' does not exist on type 'WorldService'`

**–ü—Ä–∏—á–∏–Ω–∞:** –ú–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–ª—Å—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ, –Ω–æ –Ω–µ –±—ã–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ —Å–µ—Ä–≤–∏—Å–µ.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥:
```typescript
async getActiveActionsCount() {
  const now = new Date();
  return this.prisma.action.count({
    where: { isPublished: true, expiresAt: { gt: now } },
  });
}
```

---

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ **`src/modules/friends/friends.service.ts`** - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –º–µ—Ç–æ–¥—ã
2. ‚úÖ **`src/modules/world/world.controller.ts`** - –¥–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `Body`
3. ‚úÖ **`src/modules/world/world.service.ts`** - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getActiveActionsCount`

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –í—Å–µ 23 TypeScript –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
‚úÖ –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å—Å—è
‚úÖ Docker build –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ –±–µ–∑ –æ—à–∏–±–æ–∫

---

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É –∑–∞–Ω–æ–≤–æ:

```bash
cd infra
docker compose up -d --build
```

–°–±–æ—Ä–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ –±–µ–∑ –æ—à–∏–±–æ–∫ TypeScript.

---

*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 23 —è–Ω–≤–∞—Ä—è 2026*
*–°—Ç–∞—Ç—É—Å: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Å–±–æ—Ä–∫–µ*
